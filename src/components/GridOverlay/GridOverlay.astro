---
import AnimatedColumns, {
  type Props as AnimatedColumnsProps,
} from './components/AnimatedColumns.astro';
import GridLayout, { type GridSizes } from './components/GridLayout.astro';

const GRID_SIZES: GridSizes = {
  base: 2,
  sm: 6,
  xl: 12,
};

const ANIMATED_COLUMNS: Omit<AnimatedColumnsProps, 'direction'>[] = [
  {
    animatedColumns: 2,
    columns: GRID_SIZES.base,
    className: 'max-sm:block',
  },
  {
    animatedColumns: 4,
    columns: GRID_SIZES.sm,
    className: 'sm:max-xl:block',
  },
  {
    animatedColumns: 6,
    columns: GRID_SIZES.xl,
    className: 'xl:block',
  },
];
---

<GridLayout
  id="grid-layout"
  aria-hidden="false"
  gridSizes={GRID_SIZES}
  class="transition-visible aria-hidden:invisible aria-hidden:opacity-0"
>
  <slot />
</GridLayout>
<GridLayout
  aria-hidden="true"
  gridSizes={GRID_SIZES}
  class="pointer-events-none fixed inset-0 -z-10"
>
  {
    ANIMATED_COLUMNS.map(animatedColumn => (
      <>
        <AnimatedColumns direction="down" {...animatedColumn} />
        <AnimatedColumns direction="up" {...animatedColumn} />
      </>
    ))
  }
</GridLayout>
